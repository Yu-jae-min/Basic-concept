# 8강. 멀티미디어 데이터 압축(2)

<br>
<br>

# 1. 학습개요

본 강의에서는 디지털 이미지의 압축에 대해 살펴본다. 먼저 디지털 이미지의 압축표준에 대해 설명한다. 계속해서 JPEG 압축의 개념과 알고리즘에 대해 알아보고, MPEG 압축의 개념과 알고리즘을 설명한다. 마지막으로 H.26x 표준라인에 대해 설명한다.

<br>
<br>

# 2. 학습목표

- 디지털 이미지의 압축 표준을 이해할 수 있다.

- JPEG 압축의 개념과 알고리즘을 이해할 수 있다.

- MPEG 압축의 개념과 알고리즘을 이해할 수 있다.

- H.26x 표준 라인의 종류와 그 특징을 이해할 수 있다.

<br>
<br>

# 3. 주요용어

- JPEG : 컬러 정지영상의 압축 표준으로서, 전자 스틸 카메라나 저장시스템, 전송시스템, 인쇄 시스템에 적용되며, MPEG의 기초로 사용

- MPEG : 동영상을 위한 압축 표준

- MPEG-1 : 최초의 오디오와 비디오의 표준

- MPEG-2 : 텔레비전 방송을 위한 표준

- MPEG-4 : MPEG-2의 확장 표준으로서, 멀티미디어 통신을 위해 개발

- H.26x : ITU-T에서 제정한 동영상 관련 표준

- H.261 : TV 전화 및 회의용 TV 동영상 압축 표준

- H.262 : MPEG와 공동으로 표준화한 것으로, MPEG-2와 동일

- H.263 : H.261을 기초로 압축 성능을 향상시킨 표준

- H.264/AVC : MPEG과 공동으로 개발한 압축 표준으로 MPEG-4와 비교해서 압축률과 화질을 개선. MPEG-4/AVC라고도 함

<br>
<br>

# 4. 학습하기

<br>

## 4-1. JPEG

<br>

### 4-1-1. 개요

- JPEG

  - 조직 이름으로서 컬러 정지영상의 압축 표준으로 사용

  - ISO/TC97/SC2/WG8 산하에 설치됨

  - MPEG의 기초가 되는 표준

- 디지털 방식의 전자 스틸 카메라나 영상 데이터베이스와 같은 저장 시스템, 정지화장 전송장치나 영상회의 등의 전송 시스템, 컬러 프린터 등의 인쇄 시스템 등에 이용

<br>

### 4-1-2. JPEG 알고리즘

- 손실 압축과 무손실 압축을 이용한 혼합 압축방식

- 손실 압축

  - DCT 변환과 양자화를 이용하여 압축

  - 높은 압축률에서도 실용적인 복호 화질을 얻을 수 있다.

  - 기본 방식과 확장 방식으로 구분

    - 기본 방식

      - JPEG 시스템에서의 기본으로 필수 기능

      - 영상의 각 요소가 스캔되는 순서에 따라 부호화하는 방식

    - 확장 방식

      - 영상을 여러 개의 스캔으로 부호화하는 방식

- 무손실 압축

  - 예측 방식을 이용한 무손실 압축을 수행

    - 허프만 부호화나 산술 부호화를 이용하여 엔트로피 부호화를 수행

    - DCT 변환에 비해 압축률은 낮지만 화질 열화가 생기지 않는 장점

  - 혼합 압축

    - 계층 방식을 이용

      - 다양한 환경에서 영상을 재생하거나 출력할 수 있도록 영상을 여러 해상도로 부호화

      - 영상의 해상도를 조금씩 높여가면서 부호화를 반복적으로 수행

      - 각 단계의 부호화는 손실 압축이나 무손실 압축 중 하나를 사용

<br>

### 4-1-3. JPEG 알고리즘 과정

- (1) 영상 분할 과정

  - 영상분할은 색상 모델 변환과 블록화에 의해 이루어진다.

  - 색상 모델 변환

    - RGB모델을 YIQ색상모델로 변환

    - 인간의 시각이 색상보다는 밝기에 민감하기 때문

  - 블록화

    - 전체 영상을 8x8 블록으로 블록화시켜 압축시키기 위해,

    - Y,I,Q에 대한 각각의 성분을 8x8 블록으로 나눈다.

- (2) DCT 변환 과정

  - 블록화에 의해 분할된 블록에 대해 DCT연산을 수행

    - DCT 변환을 하면 64개의 DCT계수가 구해진다. (8x8 블록)

    - 이 중에서 처음 구해진 값이 DC(직류) 성분이고, 나머지 63개는 AC(교류) 성분

- (3) 양자화 과정

  - DCT 변환과정에서 얻어진 DC와 AC 성분에 대해 양자화를 수행

    - 양자화는 인간이 감지하지 못할 정도의 범위 내에서 DCT 계수를 정수로 반올림하는 과정

    - 양자화 과정에서는 미리 정의된 양자화 테이블을 사용하여 DCT 계수를 각각 나누고 그 결과를 반올림하여 계산

- (4) 엔트로피 부호화 과정

  - 무손실 압축과정으로서, 양자화된 DCT 계수를 공간적 특성에 따라 더욱 압축하는 과정

  - 부호화 과정은 양자화된 DCT 계수를 지그재그 형태로 스캔하여 낮은 주파수에서 높은 주파수 순으로 부호화

  - 부호화 방법은 주로 허프만 코딩이 사용

    - 허프만 코딩은 자주 나타나는 값에는 짧은 길이의 부호를 할당하고, 자주 나타나지 않은 값에는 긴 길이의 부호를 할당함으로써 전체 길이를 줄이는 방법

<br>

## 4-2. MPEG

<br>

### 4-2-1. 개요

- MPEG

  - 동영상의 압축 표준

  - ISO/IEC 산하에 설치된 비디오와 오디오 등 멀티미디어의 표준 개발을 담당하는 동영상 전문가 그룹

- MPEG 표준

  - MPEG-1 : 최초의 비디오와 오디오 표준으로 MP3 오디오 압축 포맷이 여기에 포함

  - MPEG-2 : 텔레비전 방송을 위한 표준

  - MPEG-3 : 원래 HDTV 방송을 위해 고안되었으나 MPEG-2에 내용이 합해져 중지

  - MPEG-4 : MPEG-2를 확장한 표준으로 멀티미디어 통신에서의 이용을 위해 개발

  - MPEG-7 : 멀티미디어 콘텐츠를 기술하기 위한 형식적 시스템

  - MPEG-21 : 미래의 표준으로 멀티미디어 프레임워크라고 표현

<br>

### 4-2-2. MPEG 알고리즘

- JPEG 알고리즘 H.261 압축 알고리즘을 발전시킨 것

  - JPEG은 영상의 프레임 단위의 압축을 수행하는 데 반해 MPEG은 프레임 간의 연관성을 이용하여 동영상의 압축을 수행

  - MPEG은 인접 프레임 간의 연관성이 크다는 점을 이용하여 예측 기법과 보간 기법을 이용하여 압축하는 알고리즘

    - 그러나 임의의 접근이 가능해야 되므로 현재 프레임이 가진 정보만으로도 복원될 수 있는 프레임이 규칙적으로 삽입되어야 함

  - 따라서 삽입되는 프레임의 종류로는

    - I 프레임 : 압축된 프레임

    - P 프레임 : 예측만을 위한 프레임

    - B 프레임 : 보간을 위한 프레임

- MPEG 비디오의 프레임

  - GOP(Group Of Picture)

    - 하나의 I 프레임과 다음 I 프레임 사이의 프레임들의 집합

  - I 프레임(Intra-coded Frame)

    - 독립적인 영상으로 비디오 데이터의 어느 위치에 올 수 있다.

    - 비디오의 임의 접근을 위해 반드시 필요한 프레임

    - 다른 프레임의 참조 없이 자체만으로 압축된다.

    - 다른 프레임 중 가장 낮은 압축률을 가짐

  - P 프레임(Predictive-coded Frame)

    - 압축할 때 이전의 I 프레임이나 P 프레임 정보를 사용

    - 이전 프레임과 현재 프레임 간의 차이가 적은 점을 이용하여 그 차이만을 압축

  - B 프레임(Bidirectional-coded Frame)

    - 압축할 때 이전과 이후의 I 프레임이나 P 프레임 정보를 사용

    - 가장 좋은 압축률을 가진다.

- MPEG 비디오의 부호화

  ![school_1학년_2학기_멀티미디어시스템_8강_01](https://github.com/Yu-jae-min/Basic-concept/assets/85284246/502d66a9-9b14-43a4-b055-2d126a986368)

  - 압축된 프레임의 크기 I > P > B 프레임

  - I 프레임 : 주기적으로 배치되며, 임의 접근과 에러 회복을 위한 기점 역할

  - P 프레임 : 이전의 I 프레임이나 P 프레임으로부터 추정한 예측신호와의 차이를 부호화

  - B 프레임 : 화면의 전후에 위치한 I 또는 P 프레임으로부터 추정한 예측신호와의 차이를 부호화

- MPEG 비디오의 복호화

  - B 프레임을 사용하기 때문에 MPEG 데이터 스트림의 순서는 실제 복호화되는 순서와는 다를 수 있다. 즉 연관된 B 프레임 후에 출력될 P 프레임은 B 프레임의 복원시에 필요하므로 P 프레임이 먼저 복원되어야 한다.

  - 복호화의 예

    ![school_1학년_2학기_멀티미디어시스템_8강_01](https://github.com/Yu-jae-min/Basic-concept/assets/85284246/502d66a9-9b14-43a4-b055-2d126a986368)

    - 위의 예에서 프레임 번호가 2번인 I 프레임이 먼저 복호화되고, 그 I 프레임의 정보를 가지고 프레임 번호 0, 1인 B 프레임을 복호화한다. 3, 4번의 B 프레임을 복호화하기 위해서는 2번의 I 프레임과 5번의 P 프레임이 필요하므로 3, 4번을 복호화하기 전에 5번 P 프레임을 복호화하는 것이다. 같은 방법으로 10번의 B 프레임까지 복호화한다.

<br>

### 4-2-3. MPEG 표준

- MPEG-1

  - 오디오 비디오의 등장으로 저장매체에 저장하거나 전송을 위해 데이터 압축이 필요하고, 이에 따는 국가적인 호환성을 위해 표준이 필요

  - ISO/IEC/JTC1의 WC11에서 표준화

  - JPEG의 표준과 H.261(ITU에서 제정)의 표준을 조합

  - 동영상 및 스테레오 음악을 CD-ROM에서 저장하고 재생하기 위해 표준을 제정

  - 전송속도는 초당 1.5Mbps로 동영상의 화질을 충분히 전송하기에는 한계

  - MPEG-1의 특성

    - 시간적인 중복정보를 줄이는 움직임 추정과 움직임 보상 사용

    - 공간적인 중복정보를 사용하는 주파수 변환(DCT) 사용

    - 이웃하는 같은 종류의 데이터에 사용하는 차분 부호화(DPCM) 사용

    - 전송 데이터의 통계적인 발생 빈도를 고려하는 가변길이 부호화 사용

- MPEG-2

  - MPEG-1의 최고 전송속도인 1.5Mbps가 동영상의 충분한 화질을 제공하기 어렵다는 문제점을 개선하기 위해 제정

  - MPEG-1보다 높은 전송률에서 보다 좋은 화질을 얻기 위한 표준

  - DTV와 HDTV방송에 대한 요구사항이 추가

  - MPEG-2의 특성

    - 각 화면을 프레임 단위나 필드 단위로 처리

    - 순차주사와 격행주사의 영상처리

    - 화면의 크기나 프레임의 비율이 다를 경우 효율적 처리가 가능한 계층방식

- MPEG-4

  - MPEG-4 이전에 HDTV를 위한 MPEG-3 존재

    - 그러나 MPEG-1과 MPEG-2만으로 HDTV가 수용 가능하고,

    - 미국과 유럽에서 HDTV에 MPEG-1을 사용하기로 결정

    - 따라서 MPEG-3는 사용되지 않고 MPEG-4 등장

  - 전송주파수 대역폭이 작은 전송채널에 디지털 AV(Audio/Video)를 제공하기 위해 개발

    - 64Kbps 이하의 매우 낮은 전송률을 가진 부호화 방식 개발

    - 부호화 방식으로 내용기반 부호화 방식 사용

  - 부호화 방식의 종류

    - 내용기반 부호화

      - 영상의 내용에 대한 이해를 바탕으로 한 부호화 방법 : MPEG-4

      - 초저속 전송에서부터 초고속 전송의 모든 영상 응용 분야에 적용

    - 객체기반 부호화

      - 동영상 신호를 분석하여 화면에 포함된 물체들을 배경과 분리하여 인식한 후 각각을 압축하여 전송하는 방식

    - 모델기반 부호화

      - 물체에 대한 모델을 규정한 후 부호기와 복호기를 통해 모델 정보를 이용하여 물체에 대한 부호화와 복원을 하는 방식

    - 분할기분 부호화

      - 화면의 경계와 내부를 분리하고 평탄한 부분의 질감을 다소 희생하고 물체의 윤곽을 선명하게 부호화하는 방식

    - 프렉탈 부호화

      - 영상을 작은 단위로 나누면 단위 사이의 유사성이 크다는 특성을 이용하여 기하학적 변환을 통해 여러 단위를 표현하는 방식

    - 등등

  - MPEG-4의 특성

    - 기존의 방식과 새로운 기능들을 모두 지원할 수 있는 유동적인 부호화 도구 지원

    - 높은 압축률 및 다양한 접속이 가능

    - 관련 기술에 대한 융통성 및 확장성을 제공

    - 수신자의 요구와 선택에 따라 필요한 정보를 원하는 시간에 제공할 수 있는 양방향 서비스 가능

<br>

## 4-3. H.26x

- H.26x

  - ITU-T에서 제정한 동영상 관련 표준 라인

  - H.261, H.262, H.263, H.264/AVC 등이 있다.

- H.261

  - TV 전화 및 회의용 TV 동영상 압축 표준

  - 낮은 속도의 비디오 폰이나 비디오 컨퍼런스를 위해 높은 압축률과 실시간 압축을 지원

  - 시간 중복성의 제거를 위해 영상간의 예측기법을 사용하고 공간 중복성의 제거를 위해 DCT 변환 기법을 사용(MPEG 방식과 동일)

  - 압축을 위해 인트라 프레임 방식과 인터 프레임 방식을 사용

    - 인트라 프레임 방식

      - 입력 프레임이 다른 프레임과 독립적으로 부호화(MPEG의 I 프레임과 유사한 방식)

    - 인터 프레임 방식

      - 예측 기법에 기반을 둔 것으로서, 이전 프레임과 현재 프레임과의 차이를 이용

      - MPEG의 P 프레임과 유사한 방식

- H.262

  - MPEG과 공동으로 표준화

  - MPEG-2와 동일한 표준

- H.263

  - 화상회의와 화상전화를 위한 낮은 비트율 통신을 위해 개발

  - H.261을 기초로 압축성능을 향상

- H.264/AVC

  - 매우 높은 압축률을 가지는 디지털 비디오 코덱에 대한 표준

  - ITU_T와 MPEG이 공동으로 JVT을 구성하여 표준화 진행 : H.264/AVC오 MPEG-4/AVC(또는 MPEG-4 파트 10)은 동일 표준

  - H.263과 MPEG-4와 비교했을 때 절반 이하의 비트율에서 압축률이 비슷하거나 더 좋은 화질을 얻을 수 있도록 개발

<br>
<br>

# 5. 정리하기

- JPEG(Joint Photographic Experts Group)은 정지영상의 압축 표준으로, MPEG의 기초가 된다.

- JPEG은 손실 압축과 무손실 압축을 이용한 혼합 압축방식을 사용한다.

- JPEG 알고리즘을 이용한 압축은 영상 분할 과정, DCT변환 과정, 양자화 과정, 무손실 압축 과정(엔트로피 부호화 과정)으로 이루어진다.

- MPEG(Moving Picture Experts Group)은 동영상의 압축표준으로, ISO/IEC 산하에 설치된 비디오와 오디오 등 멀티미디어의 표준 개발을 담당하는 동영상 전문가 그룹이다.

- MPEG 표준으로는 MPEG-1, MPEG-2, MPEG-3, MPEG-4, MPEG-7, MPEG-21 등이 있다.

- MPEG 알고리즘은 JPEG 영상처럼 모든 프레임을 압축하는 것이 아니라 인접 프레임 간의 연관성이 크다는 점을 이용하여 예측 기법과 보간 기법을 이용한 압축 알고리즘이다.

- MPEG 알고리즘에서 삽입되는 프레임의 종류로는 I 프레임, P 프레임, B 프레임이 있다.

- H.26x는 ITU-T가 표준으로 제정한 TV 전화 및 회의용 TV 동화상 압축 부호화 방식이다.

- H.26x의 표준라인으로는 H.261, H.262, H.263, H.264/AVC 등이 있다.

<br>
