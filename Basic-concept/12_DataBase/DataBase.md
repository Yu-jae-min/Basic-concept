## # Data Base

<br>

### # 데이터베이스

- 데이터베이스(Database)

  컴퓨터 시스템에 저장된 정보를 체계적으로 모아 놓은 데이터의 집합이며, 여러 사용자와 애플리케이션이 데이터를 효율적으로 저장, 검색, 수정할 수 있도록 관리하는 시스템

- 데이터베이스 사용 이유

  1. 영속성: 메모리에 저장된 데이터는 프로그램 종료 시 사라지지만, 데이터베이스는 데이터를 영구적으로 저장하여 보존한다.

  2. 데이터 무결성 및 일관성 보장 : 무결성(데이터가 정확하고 신뢰할 수 있는 상태를 유지하는 것), 일관성(데이터베이스 트랜잭션이 완료된 후 데이터가 항상 일관된 상태를 유지하는 것)

  3. 효율적인 데이터 관리: 대량의 데이터를 구조적으로 저장하고 빠르게 조회할 수 있음

  4. 동시성 제어: 여러 사용자가 동시에 데이터에 접근할 때 충돌을 방지

  5. 보안 및 접근 제어: 권한에 따라 데이터 접근 제한 가능

- 메모리와 프로세스, 데이터베이스 관계 정리 (위 영속성 관련 추가 설명)

  1. 프로그램 실행 → 프로세스 생성

     - 우리가 어떤 프로그램을 실행하면, 운영체제는 그 프로그램을 프로세스로 만든다.

     - 이 때 RAM(주기억장치)의 일부를 그 프로세스에게 할당한다.

  2. 프로세스가 사용하는 메모리 종류

     - 코드 영역: 실행할 명령어(함수, 제어 흐름 등)

     - 데이터 영역: 전역 변수, static 변수

     - 힙 영역: 동적으로 생성된 데이터 (예: new, malloc)

     - 스택 영역: 함수 호출 시 지역 변수, 매개변수 등

  3. 프로세스 종료 → 메모리 반납

     - 프로세스가 종료되면 운영체제가 해당 프로세스에게 할당했던 모든 메모리 공간을 해제해요.

     - 즉, 그 안에 있던 데이터는 모두 사라집니다.

  그렇기 때문에 데이터를 안전하게 보존하기 위해 데이터베이스를 사용한다. 많은 프로그램은 실행 중에는 DB에서 데이터를 메모리로 가져와서 사용하고, 변경 사항은 다시 DB에 저장하는 흐름을 사용한다.

<br>

### # DBMS(Database Management System, 데이터베이스 관리 시스템)

- DBMS란?

  데이터베이스를 ‘데이터의 집합’이라고 정의한다면, 이런 데이터베이스를 생성, 운영, 관리할 수 있도록 도와주는 소프트웨어를 DBMS(Database Management System)라고 힌디.
  대부분의 현대 DBMS는 테이블 기반의 관계형 DBMS(RDBMS)이며, 이 외에도 계층형, 망형, 객체지향형 등 다양한 구조가 있다.

- 대표적인 DBMS 종류

  데이터베이스를 사용하기 위해서도 소프트웨어, 즉 DBMS를 설치해야 하는데 대표적으로 MySQL, 오라클(Oracle), SQL 서버, MariaDB 등이 있습니다.

  | DBMS       | 제작사     | 작동 운영체제             | 기타                                           |
  | :--------- | :--------- | :------------------------ | :--------------------------------------------- |
  | MySQL      | Oracle     | Unix, Linux, Windows, Mac | 오픈 소스(무료), 상용                          |
  | MariaDB    | MariaDB    | Unix, Linux, Windows      | 오픈 소스(무료), 초기 개발자들이 독립해서 만듦 |
  | PostgreSQL | PostgreSQL | Unix, Linux, Windows, Mac | 오픈 소스(무료)                                |
  | Oracle     | Oracle     | Unix, Linux, Windows      | 상용 시장 점유율 1위                           |
  | SQL Server | Microsoft  | Windows                   | 주로 중/대형급 시장에서 사용                   |
  | DB2        | IBM        | Unix, Linux, Windows      | 메인프레임 시장 점유율 1위                     |
  | Access     | Microsoft  | Windows                   | PC용                                           |
  | SQLite     | SQLite     | Android, iOS              | 모바일 전용, 오픈 소스(무료)                   |

<br>

- DBMS 분류

  - DBMS의 유형은 계층형(Hierarchical), 망형(Network), 관계형(Relational), 객체지향형(Object-Oriented), 객체관계형(Object-Relational) 등으로 분류됩니다. 현재 사용되는 DBMS 중에는 관계형 DBMS가 가장 많은 부분을 차지하며, MySQL도 관계형 DBMS에 포함됩니다.

  - 계층형 DBMS : 계층형 DBMS(Hierarchical DBMS)는 처음으로 등장한 DBMS 개념으로 1960년대에 시작되었다. 아래 그림과 같이 각 계층은 트리tree 형태를 갖습니다. 사장 1명에 이사 3명이 연결되어 있는 구조이다. 계층형 DBMS의 문제는 처음 구성을 완료한 후에 이를 변경하기가 상당히 까다롭다는 것이다. 또한 다른 구성원을 찾아가는 것이 비효율적이다. 예를 들어 재무2팀에서 회계팀으로 연결하려면 재무이사 → 사장 → 회계이사 → 회계팀과 같이 여러 단계를 거쳐야 한다. 지금은 사용하지 않는 형태이다.

    ![데이터베이스_계층형DBMS](https://github.com/Yu-jae-min/Basic-concept/assets/85284246/5caea3a1-703a-407b-8cd8-9bd684e9c9c9)

  - 망형 DBMS : 망형 DBMS(Network DBMS)는 계층형 DBMS의 문제점을 개선하기 위해 1970년대에 등장했다. 다음 그림을 보면 하위에 있는 구성원끼리도 연결된 유연한 구조이다. 예를 들어 재무2팀에서 바로 회계팀으로 연결이 가능하다. 하지만 망형 DBMS를 잘 활용하려면 프로그래머가 모든 구조를 이해해야만 프로그램 작성이 가능하다는 단점이 존재한다. 역시 지금은 거의 사용하지 않는 형태이다.

    ![데이터베이스_망형DBMS](https://github.com/Yu-jae-min/Basic-concept/assets/85284246/65ea40a3-0a60-4837-b568-3deb8f4ab2bb)

  - 관계형 DBMS : 관계형 DBMS(Relational DBMS)는 줄여서 RDBMS라고 부른다. MySQL뿐만 아니라, 대부분의 DBMS가 RDBMS 형태로 사용된다. RDBMS의 데이터베이스는 테이블(table)이라는 최소 단위로 구성되며, 이 테이블은 하나 이상의 열(column)과 행(row)으로 이루어져 있다. RDBMS에서는 모든 데이터가 테이블에 저장된다. 이 구조가 가장 기본적이고 중요한 구성이기 때문에 RDBMS는 테이블로 이루어져 있으며, 테이블은 열과 행으로 구성되어 있다는 것을 파악했다면 RDBMS를 어느정도 이해했다고 할 수 있다.

    ![데이터베이스_sql_table](https://github.com/Yu-jae-min/Basic-concept/assets/85284246/0e9935c2-82b3-4709-85cc-d04f8ae291f7)

<br>

### # 관계형 데이터베이스(relational database)

- 관계형 데이터베이스(Relational Database)

  데이터 사이의 관계에 기초를 둔 데이터베이스 시스템을 말하고 2차원 테이블로 표현한다. 원투원(두 테이블이 서로가 서로의 오로지 한 로우에만 연결),
  원투매니(한 테이블의 로우 하나에 다른 테이블의 로우 여러개가 연결), 매니투매니(중간테이블로 연결, 하나에 다른 테이블의 로우 여러개가 연결)의 관계로 테이블을 연결하며 식별 정보를
  나타내는 프라이머리 키와 테이블 관계를 나타내는 폴인 키를 활용하여 각 테이블의 값을 참조한다.

- 관계형 데이터베이스 매니지먼트 시스템(RDBMS, Relational DataBase Managenet System)

  관계형 데이터베이스 매니지먼트 시스템은 관계형 데이터베이스를 생성, 수정, 관리하는 소프트웨어

<br>

### # ERD(Entity-Relationship)

- ERD란?

  개체(Entity)-관계(Relationship) 모델이다. 테이블 간의 관계를 설명해주는 다이어그램 이라 보면 된다.

- ERD의 3요소

  - 개체(Entity)

    ![database_erd_01](https://github.com/Yu-jae-min/Basic-concept/assets/85284246/4ae80056-4e04-4604-8034-8d68aae4bd1d)

    - 데이터베이스 분야에서 개체란 데이터베이스에 데이터로 표현하려고 하는 현실 세계의 대상체

    - 개체는 현실 세계에 대해 사람이 생각하는 개념과 정보의 단위로서 의미를 지닌다

    - 개체는 독립적인 특성을 갖는다

    - 관리 대상이 되는 정보를 갖고 있는 사람, 사물, 사건, 개념 등을 의미하고 일반적으로 명사형으로 표현

    - 데이터베이스에서는 하나의 entity의 속성을 저장하기 위해 한 개 이상의 테이블을 사용한다. 그리고 그 테이블의 주제를 entity라고 표현한다.

    - 엔티티는 후에 데이터베이스의 테이블로 전환된다.

  - 속성 (Attribute)

    ![database_erd_02](https://github.com/Yu-jae-min/Basic-concept/assets/85284246/6892d468-7c38-4852-b16c-51640809ea30)

    - 속성은 저장할 필요가 있는 개체(Entity)에 관한 정보를 의미하며, 파일 구조상 데이터 필드(항목)에 해당

    - 데이터베이스를 구성하는 최초의 논리적 단위다.

    - 하나의 개체는 한 개 이상의 속성으로 구성되고 각 속성은 개체의 특성, 상태 등을 기술한다.

    - 속성은 후에 데이터베이스 테이블의 컬럼이 된다.

    - 속성은 개체가 가지고 있는 속성을 의미한다.

    - ERD에서는 속성을 "원"으로 표기한다.

    - 속성 중 "기본키"는 속성에 밑줄을 그어 표기한다.

  - 관계 (Relationship)

    ![database_erd_03](https://github.com/Yu-jae-min/Basic-concept/assets/85284246/8c9d53f4-296a-4d6b-a595-ce4e2254483c)

    - 개체간의 연관성을 관계라고 하며, 일반적으로 동사형으로 표현된다.

    - 예를 들어 부서와 사원이라는 두 개의 엔티티가 관계를 가지고 있다면 이 하나의 관계는 포함한다, 소속된다라는 2개의 현재형으로 표현한 관계를 가진다.

    - 논리적 데이터 모델링에서, Entity에서 포함시키고 싶은 다른 Entity의 Primary Key(PK, 기본키)를 Foreign Key(FK, 외래키)로서 두고, SQL문의 JOIN 기능을 이용하여 이 FK를 조건으로 하여, 일치하는 PK를 가진 data를 해당 Entity에서 참조하여 사용.

    - 관계는 개체 간의 관계를 의미한다.

    - ERD에선 개체를 서로 이으며 어떤 관계를 가지는지 "마름모"로 표기한다.

- ERD의 표기법

  - 피터첸 표기법

    ![database_erd_04](https://github.com/Yu-jae-min/Basic-concept/assets/85284246/d08788c9-b52b-4633-a876-1967b860e4df)

  - 정보공학 표기법

    ![database_erd_05](https://github.com/Yu-jae-min/Basic-concept/assets/85284246/a45ebac7-c6e9-4e69-9b8b-d6b077985480)

    - One

      일대일 혹은 일대다 관계이다. 주로 하나의 외래키가 걸린 관계라도 보면 된다.

    - Many

      다대다 관계이다. 중계 테이블을 통하여 여러개의 데이터를 바라보고 있을 때 사용한다.

    - One (and only one)

      위의 조건과 동일하게 일대일 관계이나, 하나의 row 끼리만 연결된 데이터이다.

    - Zero or one

      일대일 혹은 일대다 관계를 가지고 있으나, 필수 조건이 아님을 의미한다.

    - One or many

      일대일 혹은 다대다 관계를 가지고 있음을 의미한다. 관계를 가지고 있으나, 참조되는 row 값들이 불명확함을 의미한다.

    - Zero or many

      참조하는 테이블과의 관계가 불명확한 경우이다. 장바구니처럼 row 생성값이 없을수도, 하나일수도, 여러개일 수도 있는 경우이다.

- ERD의 관계(Relationship) 차수

  - 관계 차수란

    두 개의 엔티티 관계에서 참여자의 수를 표현하는 것을 관계차수라고 한다. 가장 일반적인 관계차수 표현방법은 1:1, 1:N, N:N이다.

  - 관계 차수 키의 종류

    - 기본 키(PK, Primary Key)

      테이블 내에서 각 행을 유일하게 식별할 수 있는 컬럼

    - 외래 키(FK, Foreign Key)

      다른 테이블의 기본 키를 참조하여 관계를 나타냄

  - 관계 차수 종류

    - 일대일 1:1(one to one)

      - 한 테이블의 한 행(row)이 다른 테이블의 한 행과만 연결됨

      - 예: 사용자 ↔ 여권

        - 테이블 구조

          ```md
          User

          - id (PK)
          - name

          Passport

          - id (PK)
          - user_id (FK → User.id, UNIQUE)
          - passport_number
          ```

        - 관계 도식

          ```md
          User (1) ←──→ (1) Passport
          ```

    - 일대다 1:N(one to many)

      - 한 테이블의 한 행이 다른 테이블의 여러 행과 연결됨

      - 예: 블로그(Blog) ↔ 게시글(Post)

        - 한 블로그에는 여러 개의 게시글이 있음

        - 하나의 게시글은 하나의 블로그에만 속함

        - 테이블 구조

          ```md
          Blog

          - id (PK)
          - title

          Post

          - id (PK)
          - blog_id (FK → Blog.id)
          - content
          ```

        - 관계 도식

          ```md
          Blog (1) ←─── (N) Post
          ```

    - 다대다 N:M(many to mamy)

      - 두 테이블의 여러 행이 서로 다수와 연결됨

      - 이를 구현하기 위해 중간 테이블(조인 테이블)을 사용

      - 예: 학생(Student) ↔ 강의(Course)

        - 한 학생은 여러 강의를 수강할 수 있음

        - 한 강의는 여러 학생이 수강할 수 있음

        - 테이블 구조

          ```md
          Student

          - id (PK)
          - name

          Course

          - id (PK)
          - title

          Enrollment -- 중간 테이블

          - student_id (FK → Student.id)
          - course_id (FK → Course.id)
          - enrollment_date
          ```

        - 관계 도식

          ```
          Student (N) ←───▶ Enrollment ◀───▶ (N) Course
          ```

- ERD 설계 단계

  - 요구사항 분석

    DB 사용 환경 분석 후 데이터베이스로 관리할 대상 및 제한 조건 도출

  - 개념적 설계

    ![database_erd_06](https://github.com/Yu-jae-min/Basic-concept/assets/85284246/8a4f4d62-e829-428e-9640-91bd12909b9e)

    분석 결과를 추상화된 표현 방식으로 기술 → 개념적 스키마 생성

  - 논리적 설계

    ![database_erd_07](https://github.com/Yu-jae-min/Basic-concept/assets/85284246/fea4a3c3-8f18-4f88-bf8e-579eceda2090)

    논리적 데이터베이스 구조에 맞는 스키마 생성 → 논리적 스키마 생성

  - 물리적 설계

    ![database_erd_08](https://github.com/Yu-jae-min/Basic-concept/assets/85284246/5b71b8ae-12f7-4323-a368-35080153883b)

    실제 컴퓨터에 저장되는 효율적이고 구현가능한 물리적 구조 설계

- ERD(Entity-Relationship) 작성

  1. 엔터티를 그린다.

  2. 엔터티를 적절하게 배치한다.

  3. 엔터티간 관계를 설정한다

     - 기본 키로 속성이 상속되는 식별자 관계를 설정한다.

     - 중복되는 관계가 있으면 안된다.

     - Circle 관계가 발생하면 안된다.

  4. 관계명을 기술한다.

     - 현재형을 사용한다.

     - 지나치게 포괄적인 용어는 사용하지 않는다.

     - 정보공학 표기법에서는 링크마다 각각의 관계를 기술한다.

  5. 관계의 참여도를 기술한다.

  6. 관계의 필수여부를 기술한다.

<br>

### # 메모리 데이터베이스

- 개념

  - 데이터를 메모리에 저장하는 데이터베이스.

  - 구조는 일반 DB처럼 키-값 형태, 리스트, 해시 등으로 저장 가능하지만

  - 실제 저장 위치가 RAM이기 때문에 속도가 매우 빠름.

- Redis란?

  - 가장 널리 쓰이는 인메모리 데이터베이스

  - 캐시용으로 많이 쓰지만, 영속 저장도 가능 (옵션에 따라 디스크에 저장 가능)

- 용도 예시

  - 로그인한 사용자 세션 저장

  - 요청 수 제한(Throttle) 체크

  - 짧은 기간 동안만 유효한 임시 데이터 저장 (ex. 인증 코드)

  - 실시간 순위표, 메시지 큐 등 빠른 데이터 처리가 필요한 기능

- 차이 정리

  | 구분      | 일반 DB (MySQL 등) | 캐시 (메모리 내 임시 저장) | Redis (메모리 DB)          |
  | --------- | ------------------ | -------------------------- | -------------------------- |
  | 저장 위치 | 디스크             | 메모리(RAM)                | 메모리(RAM, + 디스크 옵션) |
  | 속도      | 느림               | 매우 빠름                  | 매우 빠름                  |
  | 영속성    | O (지속 저장)      | X (보통 휘발성)            | 옵션에 따라 O              |
  | 활용 목적 | 핵심 데이터 저장   | 속도 향상                  | 캐시 + 세션 + 키-값 DB 등  |

- 요약

  - 캐시 : 자주 쓰는 데이터를 임시로 RAM에 저장 → 속도 ↑

  - Redis : RAM을 사용하는 빠른 DB → 속도 + 유연성

  - 둘 다 메모리를 쓰지만, 목적과 관리 방식이 다름

<br>

### # 데이터 무결성, 데이터 일관성

- 데이터 무결성 (Data Integrity)

  - 개념

    데이터가 정확하고 신뢰할 수 있는 상태를 유지하는 것, 무결성을 유지하는 것은 데이터가 잘못 입력되거나 손상되면 시스템 전체가 잘못된 정보를 바탕으로 동작할 수 있기 때문에 매우 중요하다.

  - 종류

    - 개체 무결성(Entity Integrity): 각 행(row)에는 고유한 기본키(primary key)가 반드시 존재해야 함

    - 참조 무결성(Referential Integrity): 외래키(foreign key) 관계가 올바르게 유지되어야 함 — 즉, 참조하는 값이 항상 존재해야 함

    - 도메인 무결성(Domain Integrity): 컬럼에 허용되는 값의 형식, 범위, 제약 조건이 지켜져야 함 (예: 나이는 0 이상, 이메일 형식 등)

    - 사용자 정의 무결성(User-defined Integrity): 비즈니스 규칙에 따른 데이터 조건

- 데이터 일관성 (Consistency)

  - 개념

    데이터베이스 트랜잭션이 완료된 후 데이터가 항상 일관된 상태를 유지하는 것, 즉 데이터베이스에 허용된 규칙(무결성 제약조건, 트랜잭션(여러 작업) 규칙 등)을 항상 만족하는 상태

  - 예시: 은행 계좌 이체 트랜잭션에서 돈이 송금자 계좌에서 차감되고 수취인 계좌에 정확히 더해져야 하며, 중간에 한 쪽만 처리되는 일이 없어야 함

- 무결성은 데이터가 올바르게 저장되고 유지되는 ‘정확성’에 초점, 일관성은 여러 작업(트랜잭션) 후에도 데이터가 ‘정해진 규칙을 지키고 있는 상태’를 뜻함

<br>

### # 정규화

정규화는 데이터베이스 설계 과정에서 중복을 최소화하고, 데이터 무결성을 유지하며, 삽입, 수정, 삭제 이상(anomaly)을 방지하기 위해 테이블을 여러 개로 분해하는 과정이다.

<br>

### # 인덱스

인덱스는 데이터베이스에서 검색 성능을 향상시키기 위해 사용하는 자료구조이다. 마치 책의 목차처럼, 테이블의 특정 열(Column)에 대한 정보를 미리 정렬하여 저장해두는 구조이다.

<br>

### # SQL

SQL은 Structured Query Language의 약자로, 관계형 데이터베이스(RDBMS)를 조작하고 질의(Query)하기 위한 언어이다. 데이터베이스와의 소통 언어로, 데이터를 조회, 삽입, 수정, 삭제하는 데 사용하며 절차형 언어가 아닌 선언형 언어이다. 어떻게가 아니라 무엇을 할지 기술한다.
SQL은 국제표준화기구(ISO)에서 정의한 표준 SQL(SQL Standard)이 존재하며 주요 DBMS는 이 표준을 기본적으로 따르며, 필요에 따라 자체 확장된 문법을 포함하기도 한다.
따라서 표준 SQL만 잘 익혀도 대부분의 DBMS에 적용 가능하며, 각 제품의 전용 문법은 상황에 맞게 학습하면 된다.

| DBMS       | 확장 SQL 이름 | 특징                          |
| ---------- | ------------- | ----------------------------- |
| Oracle     | PL/SQL        | Oracle 전용의 프로그래밍 확장 |
| SQL Server | T-SQL         | Microsoft SQL Server용 확장   |
| MySQL      | (기본 SQL)    | 표준 SQL + MySQL 전용 함수 등 |

<br><br><br>
